{"code":"var app=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){\"use strict\";var r,a,o;n.r(t),$(\"body\").prepend(template),messageBoxBody=$(\"#messagebox\"),r=\"click\",a=document.querySelector(\"#messagebox button\"),o=function(){messageBox.hide()},a.addEventListener?a.addEventListener(r,o,!1):a.attachEvent&&a.attachEvent(\"on\"+r,o);var i,l=(i={gameBoard:null,gameTimer:null,clockTimer:null,testTimer:null,tableCellIndex:[],verticalInputField:null,horizontalInputField:null,timeInputField:null,gameData:{rows:0,columns:0,time:0},messageBox:null,messages:{winner:\"Congratulations!, you're a winner!\",loser:\"Sorry, you're out of time. Better luck next time!.\"},runTest:function(){this.testTimer=setInterval(function(e){var t=e.getRandomIndex(1,e.gameData.rows*e.gameData.columns),n=e.tableCellIndex[t];e.tableCellIndex[t][2]++,$(\"tr:nth-child(\"+n[0]+\") TD:nth-child(\"+n[1]+\")\",e.gameBoard).trigger(\"click\")},1,this)},assertCellStateOn:function(e,t){return e.className===t},assertInitialBoardState:function(){var e=document.querySelector(\"table#board\"),t=e.rows.length-1,n=e.rows[0].cells.length-1;document.querySelector(\"#message\").innerHTML=\"<p>Board state cell test results</p>\";for(var r=!1,a=0;a<=t;a++)for(var o=e.rows[a],i=0;i<=n;i++){var l=(a+i)%2==0?\"on\":\"\";this.assertCellStateOn(o.cells[i],l)||(document.querySelector(\"#message\").innerHTML+=\"<p>Incorrect cell state: \"+String(a)+\":\"+String(i),r=!0)}r||(document.querySelector(\"#message\").innerHTML+=\"<p>Passed all tests</p>\")},getRandomIndex:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},renderTable:function(e,t){var n=document.createDocumentFragment(),r=1;this.tableCellIndex.length=0;for(var a=0;a<e;a++){var o=document.createElement(\"tr\");n.appendChild(o);for(var i=0;i<t;i++){var l=document.createElement(\"td\");l.className=(a+i)%2==0?\"on\":\"\",o.appendChild(l),this.tableCellIndex[r]=[a+1,i+1,0],r++}}this.gameBoard.appendChild(n)},setRowCells:function(e,t,n){var r=n||$(\"td:nth-child(\"+t+\")\",e);r.toggleClass(\"on\"),\"TD\"===r.prev().prop(\"tagName\")&&r.prev().toggleClass(\"on\"),\"TD\"===r.next().prop(\"tagName\")&&r.next().toggleClass(\"on\")},setAdjacentCells:function(e){var t=e.cellIndex+1,n=$(e).parent();this.setRowCells(n,t,$(e)),\"TR\"===n.prev().prop(\"tagName\")&&this.setRowCells(n.prev(),t),\"TR\"===n.next().prop(\"tagName\")&&this.setRowCells(n.next(),t)},onCellClick:function(e){this.setAdjacentCells(e),this.isWinner()&&(clearTimeout(this.gameTimer),this.onGameEnd(this),this.messageBox.show(this.messages.winner))},initTimer:function(e){var t=Date.now(),n=$(\"#clock\");this.clockTimer=setInterval(function(){var r=Date.now(),a=Math.round((e-(r-t))/1e3),o=String(a%60);n.text(Math.floor(a/60)+\":\"+(1===o.length?\"0\"+o:o))},950)},isWinner:function(){var e=$(\"td.on\",this.gameBoard).length;return 0===e||e===this.tableCellIndex.length-1},isValidForm:function(e){return e.rows>0&&e.columns>0&&e.time>0},getFormData:function(){return this.gameData.rows=Math.round(Number(this.verticalInputField.value)),this.gameData.columns=Math.round(Number(this.horizontalInputField.value)),this.gameData.time=1e3*Math.round(Number(this.timeInputField.value)),this.gameData},onGameStart:function(e,t,n){var r=this;document.querySelector(\"#message\").innerHTML=\"\",$(this.gameBoard).off(),$(this.gameBoard).empty(),clearTimeout(this.gameTimer),clearInterval(this.clockTimer),clearInterval(this.testTimer),this.renderTable(e,t),$(this.gameBoard).delegate(\"td\",\"click\",function(){r.onCellClick(this)}),this.gameTimer=setTimeout(this.onGameEnd,n,this),this.initTimer(n),document.querySelector(\"#run\").checked&&this.runTest()},onGameEnd:function(e){$(e.gameBoard).off(),clearInterval(e.clockTimer),clearInterval(e.testTimer),e.isWinner()||e.messageBox.show(e.messages.loser)},init:function(e){var t=this;this.messageBox=e,this.gameBoard=document.querySelector(\"#board\"),this.verticalInputField=document.querySelector(\"#vertical\"),this.horizontalInputField=document.querySelector(\"#horizontal\"),this.timeInputField=document.querySelector(\"#time\"),$(\"form button#start\").on(\"click\",$.proxy(function(){var e=this.getFormData();this.isValidForm(e)?this.onGameStart(e.rows,e.columns,e.time):document.querySelector(\"#message\").innerHTML='<h2 style=\"color:red\">Please enter a numeric values greater than 0<h2>'},this)),$(\"input\").on(\"mouseup keyup\",function(e){var n=$(e.target).attr(\"id\");if(\"vertical\"===n||\"horizontal\"===n){var r=t.getFormData();t.isValidForm(r)&&(document.querySelector(\"#message\").innerHTML=\"\",$(t.gameBoard).empty(),t.renderTable(r.rows,r.columns))}}),this.renderTable(5,5),this.getFormData(),$(\"button#test\").on(\"click\",$.proxy(function(){this.assertInitialBoardState()},this)),$(\"button#stats\").on(\"click\",$.proxy(function(){document.querySelector(\"#message\").innerHTML=\"\",this.tableCellIndex.forEach(function(e){document.querySelector(\"#message\").innerHTML+=\"<p>Cell \"+String(e[0])+\":\"+String(e[1])+\" clicked \"+String(e[2])+\" times \"})},this))}},{init:function(e){i.init(e)}});$(function(){l.init(messageBox)})}]);","extractedComments":[]}