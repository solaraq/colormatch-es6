{"code":"var app=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){\"use strict\";n.r(t);var i={};n.d(i,\"show\",function(){return s}),n.d(i,\"hide\",function(){return l}),n.d(i,\"init\",function(){return a});var r,o='<div id=\"messagebox\"><div class=\"header\"><span>Color Match</span></div><div class=\"body\"><span></span></div><div class=\"footer\"><button>OK</button></div></div>';function s(e){setTimeout(function(){$(\".body span\",r).text(e),r.css(\"visibility\",\"visible\")},0)}function l(){r.css(\"visibility\",\"hidden\")}function a(){var e,t,n;$(\"body\").prepend(o),r=$(\"#messagebox\"),e=\"click\",t=document.querySelector(\"#messagebox button\"),n=function(){l()},t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent(\"on\"+e,n)}let c={gameBoard:null,gameTimer:null,clockTimer:null,testTimer:null,tableCellIndex:[],verticalInputField:null,horizontalInputField:null,timeInputField:null,gameData:{rows:0,columns:0,time:0},messageBox:null,messages:{winner:\"Congratulations!, you're a winner!\",loser:\"Sorry, you're out of time. Better luck next time!.\"},runTest:function(){this.testTimer=setInterval(()=>{let e=this.getRandomIndex(1,this.gameData.rows*this.gameData.columns),t=this.tableCellIndex[e];this.tableCellIndex[e][2]++,$(\"tr:nth-child(\"+t[0]+\") TD:nth-child(\"+t[1]+\")\",this.gameBoard).trigger(\"click\")},1)},assertCellStateOn:function(e,t){return e.className===t},assertInitialBoardState:function(){let e=document.querySelector(\"table#board\"),t=e.rows.length-1,n=e.rows[0].cells.length-1;document.querySelector(\"#message\").innerHTML=\"<p>Board state cell test results</p>\";let i=!1;for(let r=0;r<=t;r++){let t=e.rows[r];for(let e=0;e<=n;e++){let n=(r+e)%2==0?\"on\":\"\";this.assertCellStateOn(t.cells[e],n)||(document.querySelector(\"#message\").innerHTML+=\"<p>Incorrect cell state: \"+String(r)+\":\"+String(e),i=!0)}}i||(document.querySelector(\"#message\").innerHTML+=\"<p>Passed all tests</p>\")},getRandomIndex:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},renderTable:function(e,t){let n=document.createDocumentFragment(),i=1;this.tableCellIndex.length=0;for(let r=0;r<e;r++){let e=document.createElement(\"tr\");n.appendChild(e);for(let n=0;n<t;n++){let t=document.createElement(\"td\");t.className=(r+n)%2==0?\"on\":\"\",e.appendChild(t),this.tableCellIndex[i]=[r+1,n+1,0],i++}}this.gameBoard.appendChild(n)},setRowCells:function(e,t,n){let i=n||$(\"td:nth-child(\"+t+\")\",e);i.toggleClass(\"on\"),\"TD\"===i.prev().prop(\"tagName\")&&i.prev().toggleClass(\"on\"),\"TD\"===i.next().prop(\"tagName\")&&i.next().toggleClass(\"on\")},setAdjacentCells:function(e){let t=e.cellIndex+1,n=$(e).parent();this.setRowCells(n,t,$(e)),\"TR\"===n.prev().prop(\"tagName\")&&this.setRowCells(n.prev(),t),\"TR\"===n.next().prop(\"tagName\")&&this.setRowCells(n.next(),t)},onCellClick:function(e){this.setAdjacentCells(e),this.isWinner()&&(clearTimeout(this.gameTimer),this.onGameEnd(this),this.messageBox.show(this.messages.winner))},initTimer:function(e){let t=$(\"#clock\"),n=new class{constructor(e={duration:3e5}){this.duration=e.duration,this.timeLeft=0,this.clockTimer=null}start(){let e=Date.now();this.clockTimer=setInterval(t=>{let n=Date.now();t.timeLeft=Math.round((t.duration-(n-e))/1e3),t.seconds=String(t.timeLeft%60).padStart(2,\"0\"),t.minutes=Math.floor(t.timeLeft/60)},950,this)}end(){clearInterval(this.clockTimer),this.clockTimer=null}reset(){this.clockTimer=null}getTimeLeft(){return{minutes:this.minutes,seconds:this.seconds,timeLeft:this.timeLeft}}}({duration:e});n.start(),this.clockTimer=setInterval(function(){var e=n.getTimeLeft();t.text(`${e.minutes}:${e.seconds}`)},950)},isWinner:function(){let e=$(\"td.on\",this.gameBoard).length;return 0===e||e===this.tableCellIndex.length-1},isValidForm:function(e){return e.rows>0&&e.columns>0&&e.time>0},getFormData:function(){return this.gameData.rows=Math.round(Number(this.verticalInputField.value)),this.gameData.columns=Math.round(Number(this.horizontalInputField.value)),this.gameData.time=1e3*Math.round(Number(this.timeInputField.value)),this.gameData},onGameStart:function(e,t,n){let i=this;document.querySelector(\"#message\").innerHTML=\"\",$(this.gameBoard).off(),$(this.gameBoard).empty(),clearTimeout(this.gameTimer),clearInterval(this.clockTimer),clearInterval(this.testTimer),this.renderTable(e,t),$(this.gameBoard).delegate(\"td\",\"click\",function(){i.onCellClick(this)}),this.gameTimer=setTimeout(this.onGameEnd,n,this),this.initTimer(n),document.querySelector(\"#run\").checked&&this.runTest()},onGameEnd:function(e){$(e.gameBoard).off(),clearInterval(e.clockTimer),clearInterval(e.testTimer),e.isWinner()||e.messageBox.show(e.messages.loser)},init:function(){let e=this;a(),this.messageBox=i,this.gameBoard=document.querySelector(\"#board\"),this.verticalInputField=document.querySelector(\"#vertical\"),this.horizontalInputField=document.querySelector(\"#horizontal\"),this.timeInputField=document.querySelector(\"#time\"),$(\"form button#start\").on(\"click\",$.proxy(function(){let e=this.getFormData();this.isValidForm(e)?this.onGameStart(e.rows,e.columns,e.time):document.querySelector(\"#message\").innerHTML='<h2 style=\"color:red\">Please enter a numeric values greater than 0<h2>'},this)),$(\"input\").on(\"mouseup keyup\",function(t){let n=$(t.target).attr(\"id\");if(\"vertical\"===n||\"horizontal\"===n){let t=e.getFormData();e.isValidForm(t)&&(document.querySelector(\"#message\").innerHTML=\"\",$(e.gameBoard).empty(),e.renderTable(t.rows,t.columns))}}),this.renderTable(5,5),this.getFormData(),$(\"button#test\").on(\"click\",$.proxy(function(){this.assertInitialBoardState()},this)),$(\"button#stats\").on(\"click\",$.proxy(function(){document.querySelector(\"#message\").innerHTML=\"\",this.tableCellIndex.forEach(function(e){document.querySelector(\"#message\").innerHTML+=\"<p>Cell \"+String(e[0])+\":\"+String(e[1])+\" clicked \"+String(e[2])+\" times \"})},this))}};$(function(){c.init()})}]);","extractedComments":[]}