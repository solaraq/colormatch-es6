{"code":"var app=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){\"use strict\";n.r(t);var r={};n.d(r,\"show\",function(){return a}),n.d(r,\"hide\",function(){return s}),n.d(r,\"init\",function(){return l});var i,o=()=>{$(\"body\").prepend('<div id=\"messagebox\"><div class=\"header\"><span>Color Match</span></div><div class=\"body\"><span></span></div><div class=\"footer\"><button>OK</button></div></div>')};function a(e){setTimeout(function(){$(\".body span\",i).text(e),i.css(\"visibility\",\"visible\")},0)}function s(){i.css(\"visibility\",\"hidden\")}function l(){var e,t,n;o(),i=$(\"#messagebox\"),e=\"click\",t=document.querySelector(\"#messagebox button\"),n=function(){s()},t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent(\"on\"+e,n)}var c={gameBoard:null,gameTimer:null,clockTimer:null,testTimer:null,tableCellIndex:[],verticalInputField:null,horizontalInputField:null,timeInputField:null,gameData:{rows:0,columns:0,time:0},messageBox:null,messages:{winner:\"Congratulations!, you're a winner!\",loser:\"Sorry, you're out of time. Better luck next time!.\"},runTest:function(){this.testTimer=setInterval(function(e){var t=e.getRandomIndex(1,e.gameData.rows*e.gameData.columns),n=e.tableCellIndex[t];e.tableCellIndex[t][2]++,$(\"tr:nth-child(\"+n[0]+\") TD:nth-child(\"+n[1]+\")\",e.gameBoard).trigger(\"click\")},1,this)},assertCellStateOn:function(e,t){return e.className===t},assertInitialBoardState:function(){var e=document.querySelector(\"table#board\"),t=e.rows.length-1,n=e.rows[0].cells.length-1;document.querySelector(\"#message\").innerHTML=\"<p>Board state cell test results</p>\";for(var r=!1,i=0;i<=t;i++)for(var o=e.rows[i],a=0;a<=n;a++){var s=(i+a)%2==0?\"on\":\"\";this.assertCellStateOn(o.cells[a],s)||(document.querySelector(\"#message\").innerHTML+=\"<p>Incorrect cell state: \"+String(i)+\":\"+String(a),r=!0)}r||(document.querySelector(\"#message\").innerHTML+=\"<p>Passed all tests</p>\")},getRandomIndex:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},renderTable:function(e,t){var n=document.createDocumentFragment(),r=1;this.tableCellIndex.length=0;for(var i=0;i<e;i++){var o=document.createElement(\"tr\");n.appendChild(o);for(var a=0;a<t;a++){var s=document.createElement(\"td\");s.className=(i+a)%2==0?\"on\":\"\",o.appendChild(s),this.tableCellIndex[r]=[i+1,a+1,0],r++}}this.gameBoard.appendChild(n)},setRowCells:function(e,t,n){var r=n||$(\"td:nth-child(\"+t+\")\",e);r.toggleClass(\"on\"),\"TD\"===r.prev().prop(\"tagName\")&&r.prev().toggleClass(\"on\"),\"TD\"===r.next().prop(\"tagName\")&&r.next().toggleClass(\"on\")},setAdjacentCells:function(e){var t=e.cellIndex+1,n=$(e).parent();this.setRowCells(n,t,$(e)),\"TR\"===n.prev().prop(\"tagName\")&&this.setRowCells(n.prev(),t),\"TR\"===n.next().prop(\"tagName\")&&this.setRowCells(n.next(),t)},onCellClick:function(e){this.setAdjacentCells(e),this.isWinner()&&(clearTimeout(this.gameTimer),this.onGameEnd(this),this.messageBox.show(this.messages.winner))},initTimer:function(e){var t=$(\"#clock\"),n=new class{constructor(e={duration:3e5}){this.duration=e.duration,this.timeLeft=0,this.clockTimer=null}start(){let e=Date.now();this.clockTimer=setInterval(t=>{let n=Date.now();t.timeLeft=Math.round((t.duration-(n-e))/1e3),t.seconds=String(t.timeLeft%60),t.seconds=1===t.seconds.length?\"0\"+t.seconds:t.seconds,t.minutes=Math.floor(t.timeLeft/60)},950,this)}end(){clearInterval(this.clockTimer),this.clockTimer=null}reset(){this.clockTimer=null}getTimeLeft(){return`${this.minutes}:${this.seconds}`}};n.start(),this.clockTimer=setInterval(function(){t.text(n.getTimeLeft())},950)},isWinner:function(){var e=$(\"td.on\",this.gameBoard).length;return 0===e||e===this.tableCellIndex.length-1},isValidForm:function(e){return e.rows>0&&e.columns>0&&e.time>0},getFormData:function(){return this.gameData.rows=Math.round(Number(this.verticalInputField.value)),this.gameData.columns=Math.round(Number(this.horizontalInputField.value)),this.gameData.time=1e3*Math.round(Number(this.timeInputField.value)),this.gameData},onGameStart:function(e,t,n){var r=this;document.querySelector(\"#message\").innerHTML=\"\",$(this.gameBoard).off(),$(this.gameBoard).empty(),clearTimeout(this.gameTimer),clearInterval(this.clockTimer),clearInterval(this.testTimer),this.renderTable(e,t),$(this.gameBoard).delegate(\"td\",\"click\",function(){r.onCellClick(this)}),this.gameTimer=setTimeout(this.onGameEnd,n,this),this.initTimer(n),document.querySelector(\"#run\").checked&&this.runTest()},onGameEnd:function(e){$(e.gameBoard).off(),clearInterval(e.clockTimer),clearInterval(e.testTimer),e.isWinner()||e.messageBox.show(e.messages.loser)},init:function(){var e=this;this.messageBox=r,this.gameBoard=document.querySelector(\"#board\"),this.verticalInputField=document.querySelector(\"#vertical\"),this.horizontalInputField=document.querySelector(\"#horizontal\"),this.timeInputField=document.querySelector(\"#time\"),$(\"form button#start\").on(\"click\",$.proxy(function(){var e=this.getFormData();this.isValidForm(e)?this.onGameStart(e.rows,e.columns,e.time):document.querySelector(\"#message\").innerHTML='<h2 style=\"color:red\">Please enter a numeric values greater than 0<h2>'},this)),$(\"input\").on(\"mouseup keyup\",function(t){var n=$(t.target).attr(\"id\");if(\"vertical\"===n||\"horizontal\"===n){var r=e.getFormData();e.isValidForm(r)&&(document.querySelector(\"#message\").innerHTML=\"\",$(e.gameBoard).empty(),e.renderTable(r.rows,r.columns))}}),this.renderTable(5,5),this.getFormData(),$(\"button#test\").on(\"click\",$.proxy(function(){this.assertInitialBoardState()},this)),$(\"button#stats\").on(\"click\",$.proxy(function(){document.querySelector(\"#message\").innerHTML=\"\",this.tableCellIndex.forEach(function(e){document.querySelector(\"#message\").innerHTML+=\"<p>Cell \"+String(e[0])+\":\"+String(e[1])+\" clicked \"+String(e[2])+\" times \"})},this))}};$(function(){c.init()})}]);","extractedComments":[]}